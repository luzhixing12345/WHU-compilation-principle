# part4

## code job

- [x] 编写一个语法，描述包含任意数量的 +、-、\* 或 / 运算符的算术表达式。使用语法，您应该能够派生诸如"2 + 7 \* 4"，"7 - 8 / 4"，"14 + 2 * 3 - 6 / 2"等表达式。
- [x] 使用语法，编写一个解释器，该解释器可以计算包含任意数量的 +、-、\* 或 / 运算符的算术表达式。您的解释器应该能够处理诸如"2 + 7 \* 4"，"7 - 8 / 4"，"14 + 2 * 3 - 6 / 2"等表达式。
- [x] 如果您已经完成了上述练习，请放松并享受:)

要求: **解决加减乘除运算符优先级不同的问题(7+2*3)**

这里我直接使用了作者的代码进行了修改,四则运算的连续计算在part2就已经实现,如果仅仅修改代码,那么显然没有考虑到乘除的优先级要高于加减

![20220405232039](https://raw.githubusercontent.com/learner-lu/picbed/master/20220405232039.png)

我一开始的思路是,用一个变量保存result,如果是`*/`那么直接计算即可,如果是`+-`,那么应该考虑到之后的符号有没有影响,最后将结果合并,但是写代码的时候发现实在是太麻烦了.

后来感觉完全可以用宏观的思路,先看做`factor1 +- factor`,将乘除放在`factor1`里,`factor */ factor`,这样就可以了.

correctness:

```python
python test.py part4
```

![20220406021359](https://raw.githubusercontent.com/learner-lu/picbed/master/20220406021359.png)

## Q&A

- 什么是上下文无关语法（语法）？

  ```s
  编译器以简洁的方式指定编程语法
  ```

- 语法有多少规则/制作？
  
  ```s
  终端 非终端
  ```

<img src="https://raw.githubusercontent.com/learner-lu/picbed/master/20220406022320.png" height="200">

- 什么是终端？（识别图片中的所有终端

  ```s
  终端就是不可再分的最小结构,可以直接表示的token, 可以近似理解为一定不在左侧出现,右侧出现>=1次
  图中为 MUL DIV INTEGER
  ```

- 什么是非终端？（识别图片中的所有非终端)

  ```S
  非终端由终端组成,非终端可以组成非终端,表示一个组合情况,相当于一个小函数,一定会在左侧出现,也会作为非终端的组成部分
  图中为 expr factor
  ```

- 什么是规则的头？（识别图片中的所有头部/左侧）
- 什么是规则主体？（识别图片中的所有身体/右侧）
- 语法的起始符号是什么？

这三问题我觉得没啥意思
